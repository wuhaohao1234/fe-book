HTTPS 的建立连接过程，也称为 TLS/SSL 握手过程，主要包括以下步骤：

1. 客户端发起请求（Client Hello）
    - 发送支持的 TLS 版本
    - 生成随机数（Client Random）
    - 发送支持的加密套件列表
    - 发送支持的压缩方法
2. 服务器响应（Server Hello）
    - 确认 TLS 版本
    - 生成随机数（Server Random）
    - 选择加密套件
    - 选择压缩方法
    - 发送服务器的数字证书
3. 客户端验证证书
    - 验证证书的有效性、可信性和域名
    - 如果验证失败，可能会显示警告
4. 客户端密钥交换
    - 生成预主密钥（Pre-Master Secret）
    - 使用服务器的公钥加密预主密钥
    - 将加密后的预主密钥发送给服务器
5. 服务器处理预主密钥
    - 使用私钥解密，获得预主密钥
6. 生成会话密钥
    - 双方使用相同的算法，基于预主密钥、Client Random 和 Server Random 生成会话密钥
7. 客户端发送完成消息
    - 通知服务器后续将使用会话密钥加密通信
8. 服务器发送完成消息
    - 通知客户端后续将使用会话密钥加密通信
9. 握手结束，开始加密通信



Tips：

+ 整个过程中，只有预主密钥是被加密传输的
+ 会话密钥由双方独立计算得出，never 在网络上传输
+ 使用非对称加密（如 RSA）保护预主密钥的传输
+ 后续通信使用对称加密（如 AES）加密，因为效率更高



> [https://juejin.cn/post/6906126429381984264](https://juejin.cn/post/6906126429381984264)
>

